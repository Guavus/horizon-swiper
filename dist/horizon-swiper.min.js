/*
 * Horizon Swiper
 * Version 1.1.0
 * Domain ( http://horizon-swiper.sebsauer.de/ )
 * Copyright 2015 Sebastian Sauer ( http://www.sebsauer.de/ )
 * Licensed under MIT ( https://github.com/sebsauer90/horizon-swiper/blob/master/LICENSE )
 */
"use strict";!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b="horizonSwiper",c={item:".horizon-item",showItems:"auto",dots:!1,numberedDots:!1,arrows:!0,arrowPrevText:"",arrowNextText:"",animationSpeed:500,mouseDrag:!0,onStart:function(){},onEnd:function(){},onSlideStart:function(){},onSlideEnd:function(){},onDragStart:function(){},onDragEnd:function(){}},d={$window:a(window),$document:a(document),innerClass:"horizon-inner",outerClass:"horizon-outer",dotContainer:'<nav class="horizon-dots"></nav>',arrowPrev:['<button class="horizon-prev">',"</button>"],arrowNext:['<button class="horizon-next">',"</button>"],showArrowsClass:"arrows",showDotsClass:"dots",initializedClass:"initialized",mouseDragClass:"mouse-drag",firstItemClass:"first-item",lastItemClass:"last-item"},e=function(){function b(b,e){var f=this;f.settings=a.extend({},c,e),f.$element=a(b),f.$items=f.$element.find(this.settings.item),f.$inner=null,f.$outer=null,f.$dots=null,f.$arrowPrev=null,f.$arrowNext=null,f.initialized=!1,f.maxHeight=0,f.innerContainerWidth=0,f.viewportSize=0,f.isAnimate=!1;var g=function h(){f.initialized===!0?f.setSizes():setTimeout(function(){h()},1e3)};d.$document.ready(function(){f.init()}),d.$window.load(function(){g()})}return b.prototype.init=function(){var a=this;a._setWrapper(),a._addArrows(),a._addDots(),a._mouseDrag(),a.setSizes(),a._resize(),a._checkPosition(),a.initialized=!0},b.prototype.setSizes=function(){var b=this;b.maxHeight=0,b.innerContainerWidth=0;for(var c=0;c<b.$items.length;++c){var e=a(b.$items[c]),f=e.outerHeight(!0),g=e.outerWidth(!0);f>b.maxHeight&&(b.maxHeight=f),b.innerContainerWidth+=g}b.viewportSize=b.$inner.width(),b.$outer.css({"max-height":b.maxHeight+"px"}),b.viewportSize<b.innerContainerWidth?(b.$element.addClass(d.initializedClass),b.settings.arrows===!0&&b.$element.addClass(d.showArrowsClass),b.settings.dots===!0&&b.$element.addClass(d.showDotsClass)):(b.$element.removeClass(d.initializedClass),b.$element.addClass(d.showArrowsClass))},b.prototype._resize=function(){var a=this,b=null,c=function(){a.setSizes(),a._checkPosition()};d.$window.resize(function(){clearTimeout(b),setTimeout(function(){c()},250)})},b.prototype._setWrapper=function(){var b=this,c=0;b.$items.wrapAll('<div class="'+d.outerClass+'">'),b.$items.wrapAll('<div class="'+d.innerClass+'">'),b.$inner=b.$element.find("."+d.innerClass),b.$outer=b.$element.find("."+d.outerClass),"auto"!==b.settings.showItems&&b.settings.showItems===parseInt(b.settings.showItems,10)&&(c=100/b.settings.showItems,b.$items.css({width:c+"%"}));for(var e=0;e<b.$items.length;++e){var f=a(b.$items[e]);f.attr("data-horizon-index",e)}},b.prototype._addDots=function(){var b=this,c="";if(b.settings.dots===!0){b.$dots=a(d.dotContainer);for(var e=0;e<b.$items.length;++e){b.settings.numberedDots===!0&&(c=e);var f=a('<button class="horizon-dot" data-horizon-target="'+e+'">'+c+"</button>");b.$dots.append(f)}b.$element.append(b.$dots),b.$dots.find("button").on("click",function(c){c.preventDefault();var d=a(this),e=d.attr("data-horizon-target");b._dotScroll(e)})}},b.prototype._dotScroll=function(b){var c=this,d=c.$dots.find('[data-horizon-index="'+b+'"]'),e=d.outerWidth(!0),f=0,g=0,h=c.viewportSize/2-e/2;c.isAnimate=!0,c.settings.onSlideStart();for(var i=0;i<c.$items.length;++i){var j=a(c.$items[i]);b>i&&(f+=j.outerWidth(!0))}g=f-h,0>g?g=0:g>c.innerContainerWidth-c.viewportSize&&(g=c.innerContainerWidth-c.viewportSize),c.$inner.animate({scrollLeft:g},c.settings.animationSpeed,function(){c._checkPosition(),c.settings.onSlideEnd(),b===c.$items.length?c.settings.onEnd():0===b&&c.settings.onStart(),c.isAnimate=!1})},b.prototype._addArrows=function(){var b=this;b.settings.arrows===!0&&(b.$arrowPrev=a(d.arrowPrev[0]+b.settings.arrowPrevText+d.arrowPrev[1]),b.$arrowNext=a(d.arrowNext[0]+b.settings.arrowNextText+d.arrowNext[1]),b.$arrowNext.insertAfter(b.$outer),b.$arrowPrev.insertAfter(b.$outer),b.$element.addClass(d.firstItemClass),b.$arrowPrev.attr("disabled","disabled"),b.$arrowPrev.on("click",function(a){a.preventDefault(),b.isAnimate===!1&&b._scrollTo("previous")}),b.$arrowNext.on("click",function(a){a.preventDefault(),b.isAnimate===!1&&b._scrollTo("next")}))},b.prototype._scrollTo=function(a){var b=this,c=b._getOffset(a);return b.isAnimate=!0,"end-position"===c||"start-position"===c?void(b.isAnimate=!1):(b.settings.onSlideStart(),void b.$inner.animate({scrollLeft:c[0]},b.settings.animationSpeed,function(){"end-position"===c[1]?b.settings.onEnd():"start-position"===c[1]&&b.settings.onStart(),b._checkPosition(),b.settings.onSlideEnd(),b.isAnimate=!1}))},b.prototype._getOffset=function(b){var c=this,d=c.$inner.scrollLeft(),e=0,f=d+c.viewportSize;if("next"===b&&d+c.viewportSize===c.innerContainerWidth)return"end-position";if("previous"===b&&0===d)return"start-position";for(var g=0;g<c.$items.length;++g){var h=a(c.$items[g]).outerWidth(!0),i="";if(e+=h,"next"===b&&e>f)return g+1===c.$items.length&&(i="end-position"),[e-c.viewportSize,i];if("previous"===b&&e>=d)return 0>=e-h&&(i="start-position"),[e-h,i]}},b.prototype._mouseDrag=function(){var a=this,b=!1,c=!1,e=0,f=0,g=(a.$inner.offset().left,0),h=!1,i=function(c){b===!1&&(g=f+(e-c.pageX),a.$inner.scrollLeft(g))};a.$element.on({touchstart:function(c){b=!0,h=!0,a.settings.onDragStart()}}),d.$document.on({touchend:function(b){h===!0&&(a._checkPosition(),a.settings.onDragEnd(),h=!1)}}),a.settings.mouseDrag===!0&&b===!1&&(a.$element.addClass(d.mouseDragClass),a.$element.on({mousedown:function(b){c=!0,e=b.pageX,f=a.$inner.scrollLeft(),"button"!==b.target.tagName.toLowerCase()&&a.settings.onDragStart()}}),d.$document.on({mousemove:function(a){c&&i(a)},mouseup:function(b){c===!0&&"button"!==b.target.tagName.toLowerCase()&&(a._checkPosition(),a.settings.onDragEnd()),c=!1}}))},b.prototype._checkPosition=function(){var a=this,b=a.$inner.scrollLeft();a.settings.arrows===!0&&a._checkArrowState(b),a.settings.dots===!0&&a._checkActiveDots(b)},b.prototype._checkActiveDots=function(b){for(var c=this,d=0,e=0,f=[b,b+c.viewportSize],g=0;g<c.$items.length;++g){var h=a(c.$items[g]),i=h.outerWidth(!0);e+=i,d+i/2>=f[0]&&e-i/2<=f[1]?c.$dots.find('[data-horizon-target="'+g+'"]').addClass("active"):c.$dots.find('[data-horizon-target="'+g+'"]').removeClass("active"),d+=i}},b.prototype._checkArrowState=function(a){var b=this;a+b.viewportSize>=b.innerContainerWidth-1?(b.$element.addClass(d.lastItemClass),b.$arrowNext.attr("disabled","disabled"),b.$element.removeClass(d.firstItemClass),b.$arrowPrev.removeAttr("disabled")):0>=a?(b.$element.addClass(d.firstItemClass),b.$arrowPrev.attr("disabled","disabled"),b.$element.removeClass(d.lastItemClass),b.$arrowNext.removeAttr("disabled")):(b.$element.removeClass(d.lastItemClass).removeClass(d.firstItemClass),b.$arrowPrev.removeAttr("disabled"),b.$arrowNext.removeAttr("disabled"))},b}();a.fn[b]=function(c){return this.each(function(){a.data(this,b)||a.data(this,b,new e(this,c))}),this}});
